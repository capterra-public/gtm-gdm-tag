___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "GDM - Universal Script",
  "categories": [
    "CONVERSIONS"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAABY2lDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokX2QsUvDUBDGv1aloHUQHRwcMolDlJIKuji0FURxCFXB6pS+pqmQxkeSIgU3/4GC/4EKzm4Whzo6OAiik+jm5KTgouV5L4mkInqP435877vjOCA5bnBu9wOoO75bXMorm6UtJfWMBL0gDObxnK6vSv6uP+P9PvTeTstZv///jcGK6TGqn5QZxl0fSKjE+p7PJe8Tj7m0FHFLshXyieRyyOeBZ71YIL4mVljNqBC/EKvlHt3q4brdYNEOcvu06WysyTmUE1jEDjxw2DDQhAId2T/8s4G/gF1yN+FSn4UafOrJkSInmMTLcMAwA5VYQ4ZSk3eO7ncX3U+NtYMnYKEjhLiItZUOcDZHJ2vH2tQ8MDIEXLW54RqB1EeZrFaB11NguASM3lDPtlfNauH26Tww8CjE2ySQOgS6LSE+joToHlPzA3DpfAEDp2ITpJYOWwAAAARjSUNQDA0AAW4D4+8AAACoZVhJZk1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQAGkAAABwAAAAQwMjIxkQEABwAAAAQBAgMAoAAABwAAAAQwMTAwoAIABAAAAAEAAABsoAMABAAAAAEAAABspAYAAwAAAAEAAAAAAAAAAICLAdkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAR6aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjE3Njc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6U2NlbmVDYXB0dXJlVHlwZT4wPC9leGlmOlNjZW5lQ2FwdHVyZVR5cGU+CiAgICAgICAgIDxleGlmOkV4aWZWZXJzaW9uPjAyMjE8L2V4aWY6RXhpZlZlcnNpb24+CiAgICAgICAgIDxleGlmOkNvbXBvbmVudHNDb25maWd1cmF0aW9uPgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaT4xPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGk+MjwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpPjM8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT4wPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC9leGlmOkNvbXBvbmVudHNDb25maWd1cmF0aW9uPgogICAgICAgICA8ZXhpZjpGbGFzaFBpeFZlcnNpb24+MDEwMDwvZXhpZjpGbGFzaFBpeFZlcnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4xNzY3PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cpmlq0YAABm/SURBVHgB7V1plBzVdb69zdKz79KM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\u003d"
  },
  "description": "Gartner Digital Markets Universal Script offers added visibility into buyer behavior and campaigns so you can optimize your PPC campaigns maximizing ROAS in an increasingly privacy-first world.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "vendorId",
    "displayName": "Vendor Id",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "vendorKey",
    "displayName": "Vendor Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');
const injectScript = require('injectScript');
const isConsentGranted = require('isConsentGranted');
const addConsentListener = require('addConsentListener');

const vendorId = data.vendorId;
const vendorKey = data.vendorKey;

const isStorageConsentGranted = isConsentGranted("ad_storage");

const url = "https://tr.capterra.com/static/wp.js";

function setConfig() {
  setInWindow('_ct', {
    vid: vendorId,
    vkey: vendorKey,
    uc: isStorageConsentGranted,
    hasDoNotTrackIPs: false,
  }, true);
}

function initDataLayer() {
  setInWindow('gdmEvents', [], true);
}

function listenForConsentChanges () {
  addConsentListener("ad_storage", (consentType, granted) => {
    if (!granted) {
      callInWindow('ct.revokeConsent');
      return;
    }

    callInWindow('ct.grantConsent');
  });
}

if(vendorId && vendorKey){
  setConfig();
  initDataLayer();
  listenForConsentChanges();
  injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);
} else {
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tr.capterra.com/static/wp.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_ct"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ct.grantConsent"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ct.revokeConsent"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gdmEvents"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Missing Vendor Id
  code: |-
    const mockData = {
      venodrKey: "test-vkey"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnFailure').wasCalled();
- name: Missing Vendor Key
  code: |-
    const mockData = {
      vendorId: "Test Vendor Id"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnFailure').wasCalled();


___NOTES___

Created on 23/01/2025, 15:23:45


